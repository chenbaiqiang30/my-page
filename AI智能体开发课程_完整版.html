<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI智能体开发：知识库构建与记忆系统 | 完整教程</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --glass-bg: rgba(255,255,255,0.95);
            --shadow: rgba(102,126,234,0.1);
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
            line-height: 1.8;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #2d3748;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        .header {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px var(--shadow);
            text-align: center;
        }
        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }
        .section {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px var(--shadow);
        }
        .section h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        .highlight { background: linear-gradient(120deg, #fef3c7 0%, #fde68a 100%); padding: 2px 6px; border-radius: 4px; font-weight: 600; }
        .keyword { color: var(--primary); font-weight: 600; }
        .important { color: #dc2626; font-weight: 600; }
        .code-block { background: #f8f9fa; border-radius: 8px; padding: 20px; margin: 20px 0; overflow-x: auto; font-family: monospace; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; background: white; border-radius: 12px; overflow: hidden; }
        th { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 15px; text-align: left; }
        td { padding: 15px; border-bottom: 1px solid #f1f5f9; }
        .theme-toggle { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: var(--glass-bg); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.5em; box-shadow: 0 4px 20px var(--shadow); }
        body.dark-mode { background: linear-gradient(135deg, #1e293b 0%, #334155 100%); }
        body.dark-mode .section, body.dark-mode .header { background: rgba(30,41,59,0.95); color: #e2e8f0; }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>🤖 AI智能体开发完整教程</h1>
        <p style="font-size:1.2em; color:#64748b; margin-top:10px;">知识库构建与记忆系统应用 | 第五节课</p>
        <div style="display:flex; justify-content:center; gap:20px; margin-top:20px; flex-wrap:wrap;">
            <span style="background:rgba(102,126,234,0.1); padding:8px 16px; border-radius:20px; color:var(--primary);">📅 时长：2小时38分</span>
            <span style="background:rgba(102,126,234,0.1); padding:8px 16px; border-radius:20px; color:var(--primary);">👨‍🏫 主讲：刘老师</span>
            <span style="background:rgba(102,126,234,0.1); padding:8px 16px; border-radius:20px; color:var(--primary);">💻 平台：扣子Coze</span>
        </div>
    </div>

    <div class="section">
        <h2>📊 课程核心内容</h2>
        <p>本节课深入讲解AI智能体的<span class="highlight">知识库构建</span>和<span class="highlight">记忆系统</span>，通过"北京旅游小助手"实战项目，掌握RAG、向量化、数据处理等核心技术。</p>
        
        <h3 style="margin-top:30px; color:var(--primary);">🎯 六大核心模块</h3>
        <table>
            <tr><th>模块</th><th>核心内容</th></tr>
            <tr><td><strong>知识库系统</strong></td><td>RAG原理、文档上传、向量化、检索优化</td></tr>
            <tr><td><strong>记忆系统</strong></td><td>变量、长期记忆、数据库三件套</td></tr>
            <tr><td><strong>数据处理</strong></td><td>收集、清洗、增强、分块策略</td></tr>
            <tr><td><strong>向量技术</strong></td><td>Embedding模型、768维向量、相似度计算</td></tr>
            <tr><td><strong>检索优化</strong></td><td>召回策略、Rerank排序、参数调优</td></tr>
            <tr><td><strong>实战项目</strong></td><td>北京旅游助手完整搭建流程</td></tr>
        </table>
    </div>

    <div class="section">
        <h2>🔑 为什么需要知识库</h2>
        <p><strong>核心问题</strong>：大模型存在<span class="important">幻觉(Hallucination)</span>，会凭空编造信息，导致严重的商业风险。</p>
        
        <h3 style="margin-top:20px; color:var(--primary);">💡 三种优化方案对比</h3>
        <table>
            <tr><th>方案</th><th>成本</th><th>效果</th><th>推荐度</th></tr>
            <tr><td><strong>提示词优化</strong></td><td>几乎免费</td><td>中等</td><td>✅ 必备基础</td></tr>
            <tr><td><strong>知识库(RAG)</strong></td><td>几十元起</td><td>高</td><td>✅✅ 强烈推荐</td></tr>
            <tr><td><strong>模型微调</strong></td><td>几千到几十万</td><td>很高</td><td>⚠️ 按需使用</td></tr>
            <tr><td><strong>模型训练</strong></td><td>几百万+</td><td>最高</td><td>❌ 极少需要</td></tr>
        </table>
        
        <div class="code-block">
<strong>推荐策略：</strong>
1. 先用提示词+知识库优化到极致
2. 如果仍不满足，再考虑模型微调
3. 模型训练只在极少数情况下需要

<strong>关键理解：</strong>
• 模型参数(7B/671B) = 思维能力(分析逻辑)
• 知识库 = 知识储备(具体信息)
• 两者结合才能达到最佳效果
        </div>
    </div>

    <div class="section">
        <h2>🔍 RAG核心原理</h2>
        <p><span class="keyword">RAG(Retrieval-Augmented Generation)</span> = 检索增强生成，是当前最常用的知识增强方案。</p>
        
        <h3 style="margin-top:20px; color:var(--primary);">📋 工作流程(7步)</h3>
        <ol style="padding-left:40px; line-height:2;">
            <li><strong>文档准备</strong>：上传PDF、Word、Excel、图片等</li>
            <li><strong>文档切片</strong>：将大文档切分成小块(Chunk)</li>
            <li><strong>向量化</strong>：使用Embedding模型转换成768/1536维向量</li>
            <li><strong>存储</strong>：保存到向量数据库(如Pinecone、Milvus)</li>
            <li><strong>用户查询</strong>：问题也转换成向量</li>
            <li><strong>相似度检索</strong>：找出最相关的文档块</li>
            <li><strong>生成答案</strong>：大模型基于检索内容+问题生成回答</li>
        </ol>

        <div class="code-block">
<strong>扣子(Coze)使用超简单：</strong>
1. 进入智能体 → 点击"知识库"
2. 上传文档(自动处理所有复杂步骤)
3. 在提示词中引用：{{知识库名称}}
4. 完成！系统自动RAG检索

<strong>支持格式：</strong>
• 文本：txt, md, docx, pdf
• 表格：xlsx, csv
• 图片：jpg, png, webp
• 在线：网页URL、公众号、Notion
        </div>
    </div>

    <div class="section">
        <h2>🔧 数据处理：从收集到向量化</h2>
        
        <h3 style="color:var(--primary);">1️⃣ 数据收集(最难的环节)</h3>
        <p><span class="important">企业现实</span>：老板以为"数据都有"，实际情况是：</p>
        <ul style="padding-left:40px;">
            <li>❌ 格式混乱：PDF、Word、PPT、图片、纸质...</li>
            <li>❌ 员工抵触：忙、不愿分享、担心泄露</li>
            <li>❌ 数据分散：QQ、微信、邮件、各种系统</li>
            <li>❌ 质量问题：80%收集到的是通用的公司介绍</li>
        </ul>
        
        <h3 style="margin-top:30px; color:var(--primary);">2️⃣ 数据清洗(提升质量)</h3>
        <table>
            <tr><th>清洗项</th><th>说明</th></tr>
            <tr><td>Unicode/特殊字符</td><td>去除不可见字符、HTML标签</td></tr>
            <tr><td>繁简转换</td><td>统一为简体中文</td></tr>
            <tr><td>敏感信息</td><td>电话、地址等打码处理</td></tr>
            <tr><td>去重</td><td>MD5去重、相似度去重</td></tr>
            <tr><td>格式规范</td><td>统一换行、标点符号</td></tr>
        </table>
        
        <p style="margin-top:20px;"><strong>推荐工具</strong>：阿里百炼、百度千帆、火山方舟(可视化配置，自动处理)</p>
        
        <h3 style="margin-top:30px; color:var(--primary);">3️⃣ 文档分块(22种策略)</h3>
        <div class="code-block">
<strong>常用分块策略：</strong>
• 按换行符：适合聊天记录、FAQ
• 固定长度：适合无结构文本(默认800字符)
• 滑动窗口：有重叠的切分，保持连贯性
• 按句子/段落：适合文章、报告
• 按结构：根据标题、章节分割
• 按语义：AI智能判断语义边界(效果最好)

<strong>参数配置：</strong>
• 最大长度：800-1000字符
• 重叠率：10-20%(块与块之间有重叠)
• 验证：上传后查看预览，确保分块合理
        </div>
        
        <h3 style="margin-top:30px; color:var(--primary);">4️⃣ 向量化(核心技术)</h3>
        <p><strong>为什么需要向量？</strong> 计算机无法直接理解"苹果"(手机)和"苹果"(水果)的区别，需要转换成数字向量。</p>
        <div class="code-block">
<strong>向量化过程：</strong>
文本 → Embedding模型 → 768/1536维向量

示例：
"人生得意须尽欢" → [0.123, -0.456, 0.789, ..., 0.567] (768个数字)
"采菊东篱下" → [0.234, -0.123, 0.456, ..., 0.321]

<strong>相似度计算：</strong>
通过计算向量距离(余弦相似度)判断语义相似程度
"友情"相关的诗 → 桃花潭水深千尺(0.95) > 海内存知己(0.92)

<strong>常用模型：</strong>
• BGE(北京智源)：中文效果好
• BERT(Google)：经典模型
• Text-Embedding-Ada-002(OpenAI)：效果优秀
        </div>
    </div>

    <div class="section">
        <h2>🧠 记忆系统：变量 vs 长期记忆 vs 数据库</h2>
        <p>这是本节课的<span class="highlight">重难点</span>！理解三者的区别和应用场景至关重要。</p>
        
        <table>
            <tr><th>类型</th><th>时效性</th><th>存储内容</th><th>应用场景</th></tr>
            <tr>
                <td><strong>变量</strong></td>
                <td>单次对话</td>
                <td>昵称、心情、临时状态</td>
                <td>本次旅行的信息</td>
            </tr>
            <tr>
                <td><strong>长期记忆</strong></td>
                <td>永久保存</td>
                <td>习惯、偏好、历史总结</td>
                <td>多次旅行形成的习惯</td>
            </tr>
            <tr>
                <td><strong>数据库</strong></td>
                <td>永久保存</td>
                <td>结构化数据、流水账</td>
                <td>去过的景点列表</td>
            </tr>
        </table>
        
        <h3 style="margin-top:30px; color:var(--primary);">🚄 火车票类比(帮助理解)</h3>
        <div class="code-block">
<strong>场景：从上海到北京旅游</strong>

【系统变量】- 自动记录：
• 用户ID(身份证)
• 出发地(上海)、目的地(北京)
• 经纬度信息
• 同行人员(如果有绑定)
→ 就像火车系统自动知道你的乘车信息

【用户变量】- 本次旅行临时信息：
• 昵称：小M
• 今天心情：不错
• 带的行李：红色行李箱
→ 对话结束后清空

【长期记忆】- 跨多次旅行的习惯：
• 每次来北京都喝豆汁儿
• 喜欢住学校附近
• 爱去后海散步
→ 永久保存，形成用户画像

【数据库】- 详细流水记录：
| 日期 | 景点 | 美食 | 花费 |
| 11.10 | 故宫 | 烤鸭 | 200元 |
| 11.11 | 长城 | 炸酱面 | 150元 |
→ 像记账本，每笔都清楚
        </div>
        
        <h3 style="margin-top:30px; color:var(--primary);">⚙️ 扣子中的配置</h3>
        <div class="code-block">
<strong>1. 变量配置：</strong>
智能体设置 → 变量 → 添加自定义变量
name: nickname
在提示词中使用：你好，{{nickname}}！

<strong>2. 长期记忆：</strong>
智能体设置 → 开启"长期记忆"
系统自动记录所有重要信息
查看：右上角"查看长期记忆"

<strong>3. 数据库：</strong>
创建数据库表：北京旅游记录
添加字段：景点(place)、美食(food)、花费(cost)
在提示词中配置自动写入规则
        </div>
    </div>

    <div class="section">
        <h2>🎯 实战项目：北京旅游小助手</h2>
        
        <h3 style="color:var(--primary);">📋 搭建步骤</h3>
        <ol style="padding-left:40px; line-height:2.2;">
            <li><strong>创建智能体</strong>：扣子平台 → 新建 → "北京旅游小助手"</li>
            <li><strong>编写提示词</strong>：
                <div class="code-block" style="margin:10px 0;">
你是专业的北京旅游小助手，热情友好。
请优先使用知识库{{北京旅游}}中的信息。
用户昵称：{{nickname}}
                </div>
            </li>
            <li><strong>上传知识库</strong>：
                <ul style="margin:10px 0;">
                    <li>北京烤鸭.docx(从百度百科复制)</li>
                    <li>北京景点大全.pdf</li>
                    <li>美食价格表.xlsx</li>
                    <li>景点照片若干</li>
                </ul>
            </li>
            <li><strong>配置变量</strong>：添加nickname(昵称)</li>
            <li><strong>开启长期记忆</strong>：在设置中打开</li>
            <li><strong>创建数据库</strong>：字段包括景点、美食、花费</li>
            <li><strong>测试验证</strong>：多轮对话测试</li>
        </ol>
        
        <h3 style="margin-top:30px; color:var(--primary);">💬 对话示例</h3>
        <div class="code-block">
<strong>第一次对话：</strong>
用户：你好
助手：你好！我是北京旅游小助手。

用户：我叫小M
助手：小M你好！欢迎来北京旅游。

用户：推荐美食
助手：[搜索知识库 - 北京烤鸭.docx]
为您推荐：
1. 北京烤鸭 - 挂炉烤鸭外酥里嫩...
2. 炸酱面 - 老北京风味...

用户：我去了故宫，吃了烤鸭
助手：[自动保存到数据库]
已记录：景点-故宫，美食-烤鸭

<strong>第二次对话（一周后）：</strong>
用户：你好
助手：小M，欢迎回来！上次您去了故宫，品尝了烤鸭。
这次想去哪里呢？推荐长城或颐和园。
        </div>
    </div>

    <div class="section">
        <h2>📚 课后作业</h2>
        
        <h3 style="color:var(--primary);">✅ 基础作业(必做)</h3>
        <div style="background:#f0fdf4; padding:20px; border-radius:12px; border-left:4px solid #10b981;">
            <strong>任务</strong>：给智能体添加知识库<br><br>
            <strong>步骤</strong>：<br>
            1. 准备一个文档(从百度百科复制内容保存成Word即可)<br>
            2. 上传到智能体知识库<br>
            3. 在提示词中用{{知识库名}}引用<br>
            4. 测试对话，验证是否显示"搜索知识库"<br><br>
            <strong>提交</strong>：配置截图 + 对话截图(显示搜索知识库)
        </div>
        
        <h3 style="margin-top:30px; color:var(--primary);">⭐ 进阶作业(选做)</h3>
        <div style="background:#fffbeb; padding:20px; border-radius:12px; border-left:4px solid #f59e0b;">
            <strong>任务1</strong>：使用阿里百炼进行数据清洗<br>
            <strong>任务2</strong>：探索知识库动态更新(在线网页自动更新)<br>
            <strong>任务3</strong>：配置完整的记忆系统(变量+长期记忆+数据库)
        </div>
    </div>

    <div class="section">
        <h2>💡 核心要点总结</h2>
        <table>
            <tr><th>技术</th><th>核心作用</th><th>推荐度</th></tr>
            <tr><td><strong>提示词</strong></td><td>基础约束和指令</td><td>⭐⭐⭐⭐⭐ 必备</td></tr>
            <tr><td><strong>知识库</strong></td><td>扩充知识面</td><td>⭐⭐⭐⭐⭐ 必备</td></tr>
            <tr><td><strong>变量</strong></td><td>临时信息存储</td><td>⭐⭐⭐⭐ 常用</td></tr>
            <tr><td><strong>长期记忆</strong></td><td>跨对话偏好</td><td>⭐⭐⭐⭐ 常用</td></tr>
            <tr><td><strong>数据库</strong></td><td>结构化记录</td><td>⭐⭐⭐ 特定场景</td></tr>
            <tr><td><strong>工作流</strong></td><td>复杂逻辑编排</td><td>⭐⭐⭐⭐ 进阶</td></tr>
        </table>
        
        <div style="background:linear-gradient(135deg,#f0f9ff,#e0f2fe); padding:30px; border-radius:12px; margin-top:30px; text-align:center;">
            <p style="font-size:1.3em; color:#0284c7; font-weight:bold;">🎓 学习心得</p>
            <p style="margin-top:15px; line-height:2;">
                <span class="highlight">实践第一</span>：概念再多，不如动手做一遍<br>
                <span class="highlight">善用AI</span>：让AI生成可视化Demo帮助理解<br>
                <span class="highlight">循序渐进</span>：入门→进阶→高级，一步一个脚印<br>
                <span class="highlight">保持好奇</span>：课程只是起点，多探索多实践
            </p>
        </div>
    </div>

    <div style="background:var(--glass-bg); backdrop-filter:blur(10px); border-radius:24px; padding:40px; text-align:center; color:#64748b;">
        <p style="font-size:0.9em;">⭐ 课程来源：AI智能体开发训练营 | 主讲：刘老师</p>
        <p style="margin-top:10px;">📅 课程时长：2小时38分钟 | 🎯 难度：进阶 | 💻 平台：扣子(Coze)</p>
        <p style="margin-top:20px; color:var(--primary); font-weight:bold;">💡 Generated with AI · Powered by Claude</p>
    </div>
</div>

<div class="theme-toggle" onclick="toggleTheme()" title="切换主题">
    <span id="theme-icon">🌙</span>
</div>

<script>
function toggleTheme() {
    document.body.classList.toggle('dark-mode');
    document.getElementById('theme-icon').textContent = 
        document.body.classList.contains('dark-mode') ? '☀️' : '🌙';
    localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
}
window.addEventListener('load', () => {
    if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark-mode');
        document.getElementById('theme-icon').textContent = '☀️';
    }
});
</script>
</body>
</html>